openapi: 3.0.0
info:
  title: User Authentication & Profile API
  description: 회원가입, 로그인, 프로필 관리 및 랭킹 시스템을 위한 API
  version: 1.0.0

tags:
  - name: User
    description: "유저 관리 및 인증 API"

paths:
  /api/user/register:
    post:
      summary: "회원가입"
      tags: [User]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [username, password1, password2]
              properties:
                username: { type: string, example: "gemini_user" }
                password1: { type: string, format: password, example: "password123" }
                password2: { type: string, format: password, example: "password123" }
      responses:
        200:
          description: "회원 가입 성공"
        404:
          description: "비밀번호 불일치"

  /api/user/login:
    post:
      summary: "로그인"
      tags: [User]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [username, password]
              properties:
                username: { type: string, example: "gemini_user" }
                password: { type: string, format: password, example: "password123" }
      responses:
        200:
          description: "로그인 성공 (쿠키에 토큰 발급)"
        401:
          description: "비밀번호 불일치"

  /api/user/mypage:
    get:
      summary: "프로필 조회"
      description: "로그인된 사용자의 칭호, 레벨, 포인트 정보를 반환합니다."
      tags: [User]
      security:
        - bearerAuth: []
      responses:
        200:
          description: "프로필 데이터 반환"
          content:
            application/json:
              schema:
                type: object
                properties:
                  name: { type: string }
                  point: { type: integer }
                  level: { type: integer }
                  title: { type: string }
    put:
      summary: "프로필(닉네임) 수정"
      tags: [User]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username: { type: string, example: "new_nickname" }
      responses:
        200:
          description: "수정 성공"

  /api/user/logout:
    get:
      summary: "로그아웃"
      tags: [User]
      responses:
        200:
          description: "로그아웃 성공 (쿠키 삭제)"

  /api/user/ranking:
    get:
      summary: "랭킹 조회"
      description: "주간/월간 등 타입별 랭킹을 조회합니다."
      tags: [User]
      parameters:
        - in: query
          name: type
          schema:
            type: string
            enum: [weekly, monthly, total]
          description: "조회할 랭킹 기간 유형"
      responses:
        200:
          description: "랭킹 데이터 반환"

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
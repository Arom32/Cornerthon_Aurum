tags:
  - name: Boards
    description: "게시물 관리 API"

paths:
  /api/boards:
    post:
      summary: "게시물 작성"
      tags: [Boards]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [category, title, content]
              properties:
                category:
                  type: string
                  enum: [review, question, notice, general, trade]
                title:
                  type: string
                content:
                  type: string
                PerformId:
                  type: string
                  description: "후기 게시판용 공연 ID"
                price:
                  type: number
                  description: "거래 게시판용 가격"
      responses:
        201:
          description: "게시물 작성 성공"
        400:
          description: "필수 항목 누락 또는 가격 미입력 (trade)"
        401:
          description: "로그인 필요"

  /api/boards/{id}:
    patch:
      summary: "게시물 수정"
      tags: [Boards]
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                title: { type: string }
                content: { type: string }
                category: { type: string }
                price: { type: number }
                tradeStatus:
                  type: string
                  enum: [available, reserved, completed]
      responses:
        200:
          description: "게시물 수정 성공"
        403:
          description: "수정 권한 없음"
    delete:
      summary: "게시물 삭제"
      tags: [Boards]
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        200:
          description: "게시물 삭제 성공"
        403:
          description: "삭제 권한 없음"

  /api/boards/list:
    get:
      summary: "게시물 목록 조회 (필터/페이징)"
      tags: [Boards]
      parameters:
        - in: query
          name: page
          schema: { type: integer, default: 1 }
        - in: query
          name: limit
          schema: { type: integer, default: 20 }
        - in: query
          name: category
          schema:
            type: string
            enum: [review, question, notice, general, trade]
          description: "카테고리 필터"
        - in: query
          name: PerformId
          schema: { type: string }
          description: "공연 ID 필터 (후기 게시판용)"
      responses:
        200:
          description: "게시물 목록 조회 성공"
          
  /api/boards/user:
    get:
      summary: "사용자 게시물 목록 조회"
      tags: [Boards]
      security:
        - bearerAuth: []
      responses:
        200:
          description: "사용자 게시물 목록 조회 성공"

  /api/boards/like:
    patch:
      summary: "게시물 좋아요 토글"
      description: "param : board의 id[필수], 본인 게시글은 좋아요가 불가능하며, 성공 시 게시물 countLikes와 게시물의 작성자 likesCount가 연동되어 업데이트."
      tags: [Boards]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [id]
              properties:
                id:
                  type: string
                  description: "좋아요를 누를 게시물의 ObjectId"
      responses:
        200:
          description: "토글 성공"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message: { type: string, example: "좋아요 추가됨" }
                  isLiked: { type: boolean, example: true }
        400:
          description: "본인 게시글 좋아요 불가"
        404:
          description: "게시물을 찾을 수 없음"
